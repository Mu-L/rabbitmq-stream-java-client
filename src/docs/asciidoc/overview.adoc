== What is a RabbitMQ Stream?

A RabbitMQ stream is a persistent and replicated data structure that models
an https://en.wikipedia.org/wiki/Append-only[append-only log]. It differs from the classical
RabbitMQ queue in the way message consumption works. In a classical RabbitMQ queue,
consuming removes messages from the queue. In a RabbitMQ stream, consuming leaves
the stream intact. So the content of a stream can be read and re-read without
impact or destructive effect.

A RabbitMQ stream is a persistent and replicated data structure that models an https://en.wikipedia.org/wiki/Append-only[append-only log].
It differs from traditional RabbitMQ queues in how message consumption works:

* **Traditional queue:** Consuming removes messages from the queue
* **Stream:** Consuming leaves messages intact for future reads

This allows stream content to be read and re-read multiple times without any destructive effects.

Neither streams nor traditional queues are inherently better â€” they serve different use cases.

== When to Use RabbitMQ Stream?

RabbitMQ Stream was developed to cover the following messaging use cases:

* **Large fan-outs:** Multiple consumer applications need to read the same messages
* **Replay/Time-traveling:** Applications need to read message history or resume from a specific point
* **High throughput:** Higher performance is required compared to other protocols (AMQP, STOMP, MQTT)
* **Large logs:** Large amounts of data must be stored with minimal memory overhead

== Other Way to Use Streams in RabbitMQ

You can also use streams in RabbitMQ with any protocol RabbitMQ supports (AMQP, MQTT, STOMP).
Instead of using the stream protocol directly, you consume from "stream-powered" queues using e.g. AMQP.
These special queues are backed by stream infrastructure and provide stream semantics (primarily non-destructive reading).

Stream-powered queues offer stream features (append-only structure, non-destructive reading) while still using your protocol of choice.

But by using another protocol than the stream protocol, one may not benefit from the performance it provides, as it has been designed with high throughput in mind.

== Guarantees

RabbitMQ stream provides at-least-once guarantees thanks to the publisher confirm mechanism.

Message <<api.adoc#outbound-message-deduplication,deduplication>> is also supported on the publisher side.

[[stream-client-overview]]
== Stream Client Overview

The RabbitMQ Stream Java Client implements the
https://github.com/rabbitmq/rabbitmq-server/blob/v{broker-version}.x/deps/rabbitmq_stream/docs/PROTOCOL.adoc[RabbitMQ Stream protocol]
and avoids dealing with low-level concerns by providing high-level functionalities
to build fast, efficient, and robust client applications.

* **Stream management:** Create and delete streams directly from applications
* **Configurable throughput:** Adjust publishing performance with batch size and flow control
* **Duplicate prevention:** Avoid duplicate messages with built-in deduplication
* **Offset tracking:** Resume consumption from where you left off with automatic or manual tracking
* **Optimized connections:** Connect publishers to stream leaders and consumers to replicas
* **Resource efficiency:** Automatically scale connections based on publisher/consumer count
* **Automatic recovery:** Handle network failures with connection recovery and consumer re-subscription
* **Observability:** Built-in support for https://prometheus.io/[Prometheus] metrics and distributed tracing (https://zipkin.io/[OpenZipkin], https://tanzu.vmware.com/observability[Wavefront]) via https://micrometer.io/[Micrometer]

== Versioning

This library uses https://semver.org/[semantic versioning].

The next section provides more details about the evolution of programming interfaces.

[[stability-of-programming-interfaces]]
== Stability of Programming Interfaces

The client contains 2 sets of programming interfaces whose stability are of interest for application developers:


* **Application Programming Interfaces (API):** Used for writing application logic.
Includes interfaces and classes in the `com.rabbitmq.stream` package (e.g., `Producer`, `Consumer`, `Message`).
These APIs form the main programming model and remain as stable as possible.
New features may add methods to existing interfaces.
* **Service Provider Interfaces (SPI):** Used for implementing technical client behavior, not application logic.
Developers may reference these during configuration or when customizing internal client behavior.
SPIs include interfaces in `com.rabbitmq.stream.codec`, `com.rabbitmq.stream.compression`, `com.rabbitmq.stream.metrics`, and other packages.
_These interfaces may change, but this typically won't affect most applications since changes are limited to client internals._

== Pre-requisites

This library requires at least Java 11, but Java 21 or more is recommended.
